"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Admin_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Admin"));
const Cliente_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Cliente"));
const User_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/User"));
const ValidacaoSenha_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/ValidacaoSenha"));
require("dotenv").config();
const aws_sdk_1 = __importDefault(require("aws-sdk"));
const sgMail = require('@sendgrid/mail');
class AuthController {
    constructor() {
        this.SES = new aws_sdk_1.default.SES({
            accessKeyId: process.env.AWS_ACCESS_KEY_ID,
            secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,
            region: process.env.AWS_REGION,
        });
    }
    async login({ auth, request, response }) {
        const email = request.input("email");
        const password = request.input("password");
        try {
            const user = await User_1.default.findByOrFail("email", email);
            let expira;
            switch (user.tipo) {
                case "cliente":
                    expira = "30days";
                    break;
                case "admin":
                    expira = "1days";
                    break;
                default:
                    expira = "30days";
                    break;
            }
            const token = await auth.use("api").attempt(email, password, {
                expiresIn: expira,
                name: user.serialize().email,
            });
            response.ok(token);
        }
        catch (error) {
            console.log(error);
            return response.badRequest("Invalid credentials");
        }
    }
    async deleteCodeVerification(id) {
        await ValidacaoSenha_1.default.query().where("id", id).delete();
    }
    async forgotPassword({ request, response }) {
        const email = request.input("email");
        try {
            const user = await User_1.default.findByOrFail("email", email);
            const cliente = await (await Cliente_1.default.findByOrFail("userId", user.id));
            const codeVerification = Math.floor(100000 + Math.random() * 900000);
            console.log(codeVerification);
            const clienteNome = cliente.nome;
            const validacaoSenha = await ValidacaoSenha_1.default.create({
                email: email,
                codigo: codeVerification,
            });
            setTimeout(this.deleteCodeVerification, 300000, validacaoSenha.id);
            let data;
            data = {
                nome: cliente.nome,
                codigo: codeVerification,
                email: email
            };
            this.sendEmail(email, codeVerification, clienteNome);
            return response.ok(data);
        }
        catch {
            return response.badRequest("Email not exist");
        }
    }
    async logout({ auth, response }) {
        try {
            await auth.use("api").revoke();
        }
        catch {
            return response.unauthorized("No authorization for it");
        }
        return response.ok({
            revoked: true,
        });
    }
    async me({ auth, response }) {
        const userAuth = await auth.use("api").authenticate();
        let data;
        switch (userAuth.tipo) {
            case "cliente":
                const cliente = await (await Cliente_1.default.findByOrFail("userId", userAuth.id));
                data = {
                    id: cliente.id,
                    nome: cliente.nome,
                    telefone: cliente.telefone,
                    email: userAuth.email,
                    foto: cliente.foto
                };
                break;
            case "admin":
                const admin = await Admin_1.default.findByOrFail("userId", userAuth.id);
                data = {
                    id_admin: admin.id,
                    nome: admin.nome,
                    email: userAuth.email
                };
                break;
            default:
                return response.unauthorized("Unauthorized user - type not found");
        }
        return response.ok(data);
    }
    async verificationCode({ params, response }) {
        const codigo = params.id;
        const validaoCodigo = await ValidacaoSenha_1.default.query()
            .where("codigo", codigo)
            .first();
        if (validaoCodigo == null) {
            return response.notFound("Nada encontrado");
        }
        return response.ok(validaoCodigo);
    }
    async sendEmail(email, codeVerification, clienteNome) {
        const from = "adotafish@gmail.com";
        sgMail.setApiKey(process.env.SENDGRID_API_KEY);
        const msg = {
            to: email,
            from: from,
            templateId: "d-475d6836e6de4cafa3ca0c636e14d8a3",
            dynamic_template_data: {
                name: clienteNome,
                code: codeVerification,
            },
        };
        try {
            sgMail.send(msg);
            console.log('Email enviado com sucesso!!!!');
        }
        catch (error) {
            console.error('Não foi possível enviar o email');
            console.error(error);
            if (error.response) {
                console.error(error.response.body);
            }
        }
    }
}
exports.default = AuthController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXV0aENvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJBdXRoQ29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLG1GQUFxQztBQUNyQyx1RkFBeUM7QUFDekMsaUZBQW1DO0FBQ25DLHFHQUF1RDtBQUN2RCxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDM0Isc0RBQTBCO0FBRTFCLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO0FBSXhDLE1BQXFCLGNBQWM7SUFBbkM7UUFFSSxRQUFHLEdBQUcsSUFBSSxpQkFBRyxDQUFDLEdBQUcsQ0FBQztZQUNkLFdBQVcsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQjtZQUMxQyxlQUFlLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUI7WUFDbEQsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVTtTQUMvQixDQUFDLENBQUM7SUE4ZlQsQ0FBQztJQTVmVSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQXVCO1FBQy9ELE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckMsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztRQU0zQyxJQUFJO1lBQ0EsTUFBTSxJQUFJLEdBQUcsTUFBTSxjQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztZQUVyRCxJQUFJLE1BQU0sQ0FBQztZQUNYLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDZixLQUFLLFNBQVM7b0JBQ1YsTUFBTSxHQUFHLFFBQVEsQ0FBQztvQkFDbEIsTUFBTTtnQkFDVixLQUFLLE9BQU87b0JBQ1IsTUFBTSxHQUFHLE9BQU8sQ0FBQztvQkFDakIsTUFBTTtnQkFDVjtvQkFDSSxNQUFNLEdBQUcsUUFBUSxDQUFDO29CQUNsQixNQUFNO2FBQ2I7WUFFRCxNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUU7Z0JBQ3pELFNBQVMsRUFBRSxNQUFNO2dCQUNqQixJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLEtBQUs7YUFDL0IsQ0FBQyxDQUFDO1lBRUgsUUFBUSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUV0QjtRQUNELE9BQU8sS0FBSyxFQUFDO1lBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNqQixPQUFPLFFBQVEsQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUMsQ0FBQztTQUNyRDtJQUNMLENBQUM7SUFHTSxLQUFLLENBQUMsc0JBQXNCLENBQUMsRUFBRTtRQUVqQyxNQUFNLHdCQUFjLENBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUMzRCxDQUFDO0lBR00sS0FBSyxDQUFDLGNBQWMsQ0FBQyxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQXVCO1FBQ2pFLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFckMsSUFBSTtZQUNBLE1BQU0sSUFBSSxHQUFHLE1BQU0sY0FBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFFckQsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLE1BQU0saUJBQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRXRFLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDO1lBQ3JFLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUU5QixNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBR2pDLE1BQU0sY0FBYyxHQUFHLE1BQU0sd0JBQWMsQ0FBQyxNQUFNLENBQUM7Z0JBQy9DLEtBQUssRUFBRSxLQUFLO2dCQUNaLE1BQU0sRUFBRSxnQkFBZ0I7YUFFM0IsQ0FBQyxDQUFDO1lBSUgsVUFBVSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxNQUFNLEVBQUUsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBR25FLElBQUksSUFBSSxDQUFDO1lBRVQsSUFBSSxHQUFHO2dCQUNILElBQUksRUFBRSxPQUFPLENBQUMsSUFBSTtnQkFDbEIsTUFBTSxFQUFDLGdCQUFnQjtnQkFDdkIsS0FBSyxFQUFFLEtBQUs7YUFDZixDQUFDO1lBRUYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUMsZ0JBQWdCLEVBQUMsV0FBVyxDQUFDLENBQUM7WUFFbkQsT0FBTyxRQUFRLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBRTVCO1FBQ0QsTUFBTTtZQUNGLE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1NBQ2pEO0lBQ0wsQ0FBQztJQUVNLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUF1QjtRQUN2RCxJQUFJO1lBQ0EsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ2xDO1FBQ0QsTUFBTTtZQUNGLE9BQU8sUUFBUSxDQUFDLFlBQVksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1NBQzNEO1FBRUQsT0FBTyxRQUFRLENBQUMsRUFBRSxDQUFDO1lBQ2YsT0FBTyxFQUFFLElBQUk7U0FDaEIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVNLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUF1QjtRQUNuRCxNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUM7UUFFdEQsSUFBSSxJQUFJLENBQUM7UUFFVCxRQUFRLFFBQVEsQ0FBQyxJQUFJLEVBQUU7WUFDbkIsS0FBSyxTQUFTO2dCQUNWLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLGlCQUFPLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFFMUUsSUFBSSxHQUFHO29CQUNILEVBQUUsRUFBRSxPQUFPLENBQUMsRUFBRTtvQkFDZCxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUk7b0JBQ2xCLFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUTtvQkFDMUIsS0FBSyxFQUFFLFFBQVEsQ0FBQyxLQUFLO29CQUNyQixJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUk7aUJBQ3JCLENBQUM7Z0JBQ0YsTUFBTTtZQUNWLEtBQUssT0FBTztnQkFDUixNQUFNLEtBQUssR0FBRyxNQUFNLGVBQUssQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDOUQsSUFBSSxHQUFHO29CQUNILFFBQVEsRUFBRSxLQUFLLENBQUMsRUFBRTtvQkFDbEIsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJO29CQUNoQixLQUFLLEVBQUUsUUFBUSxDQUFDLEtBQUs7aUJBQ3hCLENBQUM7Z0JBQ0YsTUFBTTtZQUNWO2dCQUNJLE9BQU8sUUFBUSxDQUFDLFlBQVksQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO1NBRTFFO1FBQ0QsT0FBTyxRQUFRLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFTSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUF1QjtRQUNuRSxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsRUFBRSxDQUFDO1FBRXpCLE1BQU0sYUFBYSxHQUFHLE1BQU0sd0JBQWMsQ0FBQyxLQUFLLEVBQUU7YUFDN0MsS0FBSyxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7YUFDdkIsS0FBSyxFQUFFLENBQUM7UUFFYixJQUFJLGFBQWEsSUFBSSxJQUFJLEVBQUU7WUFDdkIsT0FBTyxRQUFRLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FDL0M7UUFDRCxPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVNLEtBQUssQ0FBRSxTQUFTLENBQUMsS0FBSyxFQUFDLGdCQUFnQixFQUFDLFdBQVc7UUFFdEQsTUFBTSxJQUFJLEdBQUcscUJBQXFCLENBQUM7UUFrVjNDLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO1FBQzlDLE1BQU0sR0FBRyxHQUFHO1lBQ1YsRUFBRSxFQUFFLEtBQUs7WUFDVCxJQUFJLEVBQUUsSUFBSTtZQUNWLFVBQVUsRUFBRSxvQ0FBb0M7WUFDOUMscUJBQXFCLEVBQUU7Z0JBQ3JCLElBQUksRUFBQyxXQUFXO2dCQUNoQixJQUFJLEVBQUUsZ0JBQWdCO2FBQ3ZCO1NBQ0osQ0FBQTtRQUNELElBQUc7WUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsK0JBQStCLENBQUMsQ0FBQztTQUM5QztRQUFBLE9BQU0sS0FBSyxFQUFDO1lBQ1gsT0FBTyxDQUFDLEtBQUssQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO1lBQ2pELE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFckIsSUFBRyxLQUFLLENBQUMsUUFBUSxFQUFDO2dCQUNoQixPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUE7YUFDbkM7U0FDRjtJQUNELENBQUM7Q0FDQTtBQXBnQkQsaUNBb2dCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSHR0cENvbnRleHRDb250cmFjdCB9IGZyb20gJ0Bpb2M6QWRvbmlzL0NvcmUvSHR0cENvbnRleHQnXG5pbXBvcnQgQWRtaW4gZnJvbSAnQXBwL01vZGVscy9BZG1pbic7XG5pbXBvcnQgQ2xpZW50ZSBmcm9tICdBcHAvTW9kZWxzL0NsaWVudGUnO1xuaW1wb3J0IFVzZXIgZnJvbSAnQXBwL01vZGVscy9Vc2VyJztcbmltcG9ydCBWYWxpZGFjYW9TZW5oYSBmcm9tICdBcHAvTW9kZWxzL1ZhbGlkYWNhb1NlbmhhJztcbnJlcXVpcmUoXCJkb3RlbnZcIikuY29uZmlnKCk7XG5pbXBvcnQgQVdTIGZyb20gJ2F3cy1zZGsnO1xuXG5jb25zdCBzZ01haWwgPSByZXF1aXJlKCdAc2VuZGdyaWQvbWFpbCcpXG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRoQ29udHJvbGxlciB7XG4gICAgXG4gICAgU0VTID0gbmV3IEFXUy5TRVMoe1xuICAgICAgICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQsXG4gICAgICAgIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZLFxuICAgICAgICByZWdpb246IHByb2Nlc3MuZW52LkFXU19SRUdJT04sXG4gICAgICB9KTtcblxuICAgIHB1YmxpYyBhc3luYyBsb2dpbih7IGF1dGgsIHJlcXVlc3QsIHJlc3BvbnNlIH06IEh0dHBDb250ZXh0Q29udHJhY3QpIHtcbiAgICAgICAgY29uc3QgZW1haWwgPSByZXF1ZXN0LmlucHV0KFwiZW1haWxcIik7XG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gcmVxdWVzdC5pbnB1dChcInBhc3N3b3JkXCIpO1xuXG4gICAgICAgIC8vY29uc29sZS5sb2coZW1haWwpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKHBhc3N3b3JkKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkUtbWFpbCBlbnZpYWRvIGNvbSBzdWNlc3NvIVwiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5T3JGYWlsKFwiZW1haWxcIiwgZW1haWwpO1xuXG4gICAgICAgICAgICBsZXQgZXhwaXJhO1xuICAgICAgICAgICAgc3dpdGNoICh1c2VyLnRpcG8pIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2xpZW50ZVwiOlxuICAgICAgICAgICAgICAgICAgICBleHBpcmEgPSBcIjMwZGF5c1wiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWRtaW5cIjpcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJhID0gXCIxZGF5c1wiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBleHBpcmEgPSBcIjMwZGF5c1wiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBhdXRoLnVzZShcImFwaVwiKS5hdHRlbXB0KGVtYWlsLCBwYXNzd29yZCwge1xuICAgICAgICAgICAgICAgIGV4cGlyZXNJbjogZXhwaXJhLFxuICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIuc2VyaWFsaXplKCkuZW1haWwsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVzcG9uc2Uub2sodG9rZW4pO1xuXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYmFkUmVxdWVzdChcIkludmFsaWQgY3JlZGVudGlhbHNcIik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHB1YmxpYyBhc3luYyBkZWxldGVDb2RlVmVyaWZpY2F0aW9uKGlkKXtcblxuICAgICAgICAgYXdhaXQgVmFsaWRhY2FvU2VuaGEucXVlcnkoKS53aGVyZShcImlkXCIsIGlkKS5kZWxldGUoKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgcHVibGljIGFzeW5jIGZvcmdvdFBhc3N3b3JkKHtyZXF1ZXN0LCByZXNwb25zZSB9OiBIdHRwQ29udGV4dENvbnRyYWN0KSB7XG4gICAgICAgIGNvbnN0IGVtYWlsID0gcmVxdWVzdC5pbnB1dChcImVtYWlsXCIpO1xuICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5T3JGYWlsKFwiZW1haWxcIiwgZW1haWwpO1xuXG4gICAgICAgICAgICBjb25zdCBjbGllbnRlID0gYXdhaXQgKGF3YWl0IENsaWVudGUuZmluZEJ5T3JGYWlsKFwidXNlcklkXCIsIHVzZXIuaWQpKTtcblxuICAgICAgICAgICAgY29uc3QgY29kZVZlcmlmaWNhdGlvbiA9IE1hdGguZmxvb3IoMTAwMDAwICsgTWF0aC5yYW5kb20oKSAqIDkwMDAwMCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb2RlVmVyaWZpY2F0aW9uKTtcblxuICAgICAgICAgICAgY29uc3QgY2xpZW50ZU5vbWUgPSBjbGllbnRlLm5vbWU7XG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdmFsaWRhY2FvU2VuaGEgPSBhd2FpdCBWYWxpZGFjYW9TZW5oYS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICBjb2RpZ286IGNvZGVWZXJpZmljYXRpb24sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL0FwYWdhIG8gcmVnaXN0cm8gZG8gYmFuY28gZGUgZGFkb3MgZGVwb2lzIGRlIHVtIHRlbXBvXG4gICAgICAgICAgICAvLzMwMDAwID0gNSBtaW51dG9zXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuZGVsZXRlQ29kZVZlcmlmaWNhdGlvbiwgMzAwMDAwLCB2YWxpZGFjYW9TZW5oYS5pZCk7XG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGRhdGE7XG5cbiAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgbm9tZTogY2xpZW50ZS5ub21lLFxuICAgICAgICAgICAgICAgIGNvZGlnbzpjb2RlVmVyaWZpY2F0aW9uLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5zZW5kRW1haWwoZW1haWwsY29kZVZlcmlmaWNhdGlvbixjbGllbnRlTm9tZSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5vayhkYXRhKTtcblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5iYWRSZXF1ZXN0KFwiRW1haWwgbm90IGV4aXN0XCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGxvZ291dCh7IGF1dGgsIHJlc3BvbnNlIH06IEh0dHBDb250ZXh0Q29udHJhY3QpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGF1dGgudXNlKFwiYXBpXCIpLnJldm9rZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS51bmF1dGhvcml6ZWQoXCJObyBhdXRob3JpemF0aW9uIGZvciBpdFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZS5vayh7XG4gICAgICAgICAgICByZXZva2VkOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbWUoeyBhdXRoLCByZXNwb25zZSB9OiBIdHRwQ29udGV4dENvbnRyYWN0KSB7XG4gICAgICAgIGNvbnN0IHVzZXJBdXRoID0gYXdhaXQgYXV0aC51c2UoXCJhcGlcIikuYXV0aGVudGljYXRlKCk7XG5cbiAgICAgICAgbGV0IGRhdGE7XG5cbiAgICAgICAgc3dpdGNoICh1c2VyQXV0aC50aXBvKSB7XG4gICAgICAgICAgICBjYXNlIFwiY2xpZW50ZVwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudGUgPSBhd2FpdCAoYXdhaXQgQ2xpZW50ZS5maW5kQnlPckZhaWwoXCJ1c2VySWRcIiwgdXNlckF1dGguaWQpKTtcblxuICAgICAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBjbGllbnRlLmlkLFxuICAgICAgICAgICAgICAgICAgICBub21lOiBjbGllbnRlLm5vbWUsXG4gICAgICAgICAgICAgICAgICAgIHRlbGVmb25lOiBjbGllbnRlLnRlbGVmb25lLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlckF1dGguZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIGZvdG86IGNsaWVudGUuZm90b1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYWRtaW5cIjpcbiAgICAgICAgICAgICAgICBjb25zdCBhZG1pbiA9IGF3YWl0IEFkbWluLmZpbmRCeU9yRmFpbChcInVzZXJJZFwiLCB1c2VyQXV0aC5pZCk7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWRfYWRtaW46IGFkbWluLmlkLFxuICAgICAgICAgICAgICAgICAgICBub21lOiBhZG1pbi5ub21lLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlckF1dGguZW1haWxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudW5hdXRob3JpemVkKFwiVW5hdXRob3JpemVkIHVzZXIgLSB0eXBlIG5vdCBmb3VuZFwiKTtcblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZS5vayhkYXRhKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgdmVyaWZpY2F0aW9uQ29kZSh7IHBhcmFtcywgcmVzcG9uc2UgfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgICAgICBjb25zdCBjb2RpZ28gPSBwYXJhbXMuaWQ7XG5cbiAgICAgICAgY29uc3QgdmFsaWRhb0NvZGlnbyA9IGF3YWl0IFZhbGlkYWNhb1NlbmhhLnF1ZXJ5KClcbiAgICAgICAgICAgIC53aGVyZShcImNvZGlnb1wiLCBjb2RpZ28pXG4gICAgICAgICAgICAuZmlyc3QoKTtcblxuICAgICAgICBpZiAodmFsaWRhb0NvZGlnbyA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uubm90Rm91bmQoXCJOYWRhIGVuY29udHJhZG9cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLm9rKHZhbGlkYW9Db2RpZ28pO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyAgc2VuZEVtYWlsKGVtYWlsLGNvZGVWZXJpZmljYXRpb24sY2xpZW50ZU5vbWUpIHtcblxuICAgICAgICBjb25zdCBmcm9tID0gXCJhZG90YWZpc2hAZ21haWwuY29tXCI7XG4gICAgXG4gICAgICAgIC8qXG4gICAgICAgIHZhciBsb2dvID0gXCJodHRwczovL2ZpcmViYXNlc3RvcmFnZS5nb29nbGVhcGlzLmNvbS92MC9iL2FwcC1hZG90YS1maXNoLmFwcHNwb3QuY29tL28vaW1hZ2VzJTJGZW1haWwlMkZpbWFnZS02LmpwZWc/YWx0PW1lZGlhJnRva2VuPTlkYWYyNmZiLTlmODYtNGFjNi04YTg5LWE5MTAwMzViOTIyM1wiO1xuICAgICAgICB2YXIgY2FkZWFkbyA9IFwiaHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9hcHAtYWRvdGEtZmlzaC5hcHBzcG90LmNvbS9vL2ltYWdlcyUyRmVtYWlsJTJGaW1hZ2UtNS5wbmc/YWx0PW1lZGlhJnRva2VuPWRlNTE2ZmI0LWM2MjEtNGY4My04ODdmLTBhNjdkODJmM2ZhNVwiO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgIERlc3RpbmF0aW9uOiB7XG4gICAgICAgICAgICBUb0FkZHJlc3NlczogW2VtYWlsXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIE1lc3NhZ2U6IHtcbiAgICAgICAgICAgIEJvZHk6IHtcbiAgICAgICAgICAgICAgSHRtbDoge1xuICAgICAgICAgICAgICAgIENoYXJzZXQ6IFwiVVRGLThcIixcbiAgICAgICAgICAgICAgICBEYXRhOiBgPCFET0NUWVBFIEhUTUwgUFVCTElDIFwiLS8vVzNDLy9EVEQgWEhUTUwgMS4wIFRyYW5zaXRpb25hbCAvL0VOXCIgXCJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS10cmFuc2l0aW9uYWwuZHRkXCI+XG4gICAgICAgICAgICAgICAgPGh0bWwgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIgeG1sbnM6dj1cInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sXCIgeG1sbnM6bz1cInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlOm9mZmljZVwiPlxuICAgICAgICAgICAgICAgIDxoZWFkPlxuICAgICAgICAgICAgICAgIDwhLS1baWYgZ3RlIG1zbyA5XT5cbiAgICAgICAgICAgICAgICA8eG1sPlxuICAgICAgICAgICAgICAgICAgPG86T2ZmaWNlRG9jdW1lbnRTZXR0aW5ncz5cbiAgICAgICAgICAgICAgICAgICAgPG86QWxsb3dQTkcvPlxuICAgICAgICAgICAgICAgICAgICA8bzpQaXhlbHNQZXJJbmNoPjk2PC9vOlBpeGVsc1BlckluY2g+XG4gICAgICAgICAgICAgICAgICA8L286T2ZmaWNlRG9jdW1lbnRTZXR0aW5ncz5cbiAgICAgICAgICAgICAgICA8L3htbD5cbiAgICAgICAgICAgICAgICA8IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICAgIDxtZXRhIGh0dHAtZXF1aXY9XCJDb250ZW50LVR5cGVcIiBjb250ZW50PVwidGV4dC9odG1sOyBjaGFyc2V0PVVURi04XCI+XG4gICAgICAgICAgICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxuICAgICAgICAgICAgICAgICAgPG1ldGEgbmFtZT1cIngtYXBwbGUtZGlzYWJsZS1tZXNzYWdlLXJlZm9ybWF0dGluZ1wiPlxuICAgICAgICAgICAgICAgICAgPCEtLVtpZiAhbXNvXT48IS0tPjxtZXRhIGh0dHAtZXF1aXY9XCJYLVVBLUNvbXBhdGlibGVcIiBjb250ZW50PVwiSUU9ZWRnZVwiPjwhLS08IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICAgIDx0aXRsZT48L3RpdGxlPlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDYyMHB4KSB7XG4gICAgICAgICAgICAgICAgICAudS1yb3cge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC51LXJvdyAudS1jb2wge1xuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLnUtcm93IC51LWNvbC01MCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzMDBweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLnUtcm93IC51LWNvbC0xMDAge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDYyMHB4KSB7XG4gICAgICAgICAgICAgICAgICAudS1yb3ctY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDBweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLnUtcm93IC51LWNvbCB7XG4gICAgICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMzIwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAudS1yb3cge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLnUtY29sIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC51LWNvbCA+IGRpdiB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBib2R5IHtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRhYmxlLFxuICAgICAgICAgICAgICAgIHRyLFxuICAgICAgICAgICAgICAgIHRkIHtcbiAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XG4gICAgICAgICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBwIHtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLmllLWNvbnRhaW5lciB0YWJsZSxcbiAgICAgICAgICAgICAgICAubXNvLWNvbnRhaW5lciB0YWJsZSB7XG4gICAgICAgICAgICAgICAgICB0YWJsZS1sYXlvdXQ6IGZpeGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAqIHtcbiAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBpbmhlcml0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhW3gtYXBwbGUtZGF0YS1kZXRlY3RvcnM9J3RydWUnXSB7XG4gICAgICAgICAgICAgICAgICBjb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRhYmxlLCB0ZCB7IGNvbG9yOiAjMDAwMDAwOyB9ICN1X2JvZHkgYSB7IGNvbG9yOiAjMTYxYTM5OyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgfVxuICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8IS0tW2lmICFtc29dPjwhLS0+PGxpbmsgaHJlZj1cImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1MYXRvOjQwMCw3MDAmZGlzcGxheT1zd2FwXCIgcmVsPVwic3R5bGVzaGVldFwiIHR5cGU9XCJ0ZXh0L2Nzc1wiPjwhLS08IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8L2hlYWQ+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGJvZHkgY2xhc3M9XCJjbGVhbi1ib2R5IHVfYm9keVwiIHN0eWxlPVwibWFyZ2luOiAwO3BhZGRpbmc6IDA7LXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiAxMDAlO2JhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7Y29sb3I6ICMwMDAwMDBcIj5cbiAgICAgICAgICAgICAgICAgIDwhLS1baWYgSUVdPjxkaXYgY2xhc3M9XCJpZS1jb250YWluZXJcIj48IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICAgIDwhLS1baWYgbXNvXT48ZGl2IGNsYXNzPVwibXNvLWNvbnRhaW5lclwiPjwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgICAgPHRhYmxlIGlkPVwidV9ib2R5XCIgc3R5bGU9XCJib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO3RhYmxlLWxheW91dDogZml4ZWQ7Ym9yZGVyLXNwYWNpbmc6IDA7bXNvLXRhYmxlLWxzcGFjZTogMHB0O21zby10YWJsZS1yc3BhY2U6IDBwdDt2ZXJ0aWNhbC1hbGlnbjogdG9wO21pbi13aWR0aDogMzIwcHg7TWFyZ2luOiAwIGF1dG87YmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTt3aWR0aDoxMDAlXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCI+XG4gICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9XCJ2ZXJ0aWNhbC1hbGlnbjogdG9wXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cIndvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7Ym9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZSAhaW1wb3J0YW50O3ZlcnRpY2FsLWFsaWduOiB0b3BcIj5cbiAgICAgICAgICAgICAgICAgICAgPCEtLVtpZiAobXNvKXwoSUUpXT48dGFibGUgd2lkdGg9XCIxMDAlXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgYm9yZGVyPVwiMFwiPjx0cj48dGQgYWxpZ249XCJjZW50ZXJcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XCI+PCFbZW5kaWZdLS0+XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1LXJvdy1jb250YWluZXJcIiBzdHlsZT1cInBhZGRpbmc6IDBweDtiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidS1yb3dcIiBzdHlsZT1cIk1hcmdpbjogMCBhdXRvO21pbi13aWR0aDogMzIwcHg7bWF4LXdpZHRoOiA2MDBweDtvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO3dvcmQtd3JhcDogYnJlYWstd29yZDt3b3JkLWJyZWFrOiBicmVhay13b3JkO2JhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO2Rpc3BsYXk6IHRhYmxlO3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8IS0tW2lmIChtc28pfChJRSldPjx0YWJsZSB3aWR0aD1cIjEwMCVcIiBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiBib3JkZXI9XCIwXCI+PHRyPjx0ZCBzdHlsZT1cInBhZGRpbmc6IDBweDtiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1wiIGFsaWduPVwiY2VudGVyXCI+PHRhYmxlIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIGJvcmRlcj1cIjBcIiBzdHlsZT1cIndpZHRoOjYwMHB4O1wiPjx0ciBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7XCI+PCFbZW5kaWZdLS0+XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPCEtLVtpZiAobXNvKXwoSUUpXT48dGQgYWxpZ249XCJjZW50ZXJcIiB3aWR0aD1cIjYwMFwiIHN0eWxlPVwid2lkdGg6IDYwMHB4O3BhZGRpbmc6IDBweDtib3JkZXItdG9wOiAwcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWxlZnQ6IDBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmlnaHQ6IDBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItYm90dG9tOiAwcHggc29saWQgdHJhbnNwYXJlbnQ7XCIgdmFsaWduPVwidG9wXCI+PCFbZW5kaWZdLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInUtY29sIHUtY29sLTEwMFwiIHN0eWxlPVwibWF4LXdpZHRoOiAzMjBweDttaW4td2lkdGg6IDYwMHB4O2Rpc3BsYXk6IHRhYmxlLWNlbGw7dmVydGljYWwtYWxpZ246IHRvcDtcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJoZWlnaHQ6IDEwMCU7d2lkdGg6IDEwMCUgIWltcG9ydGFudDtcIj5cbiAgICAgICAgICAgICAgICAgIDwhLS1baWYgKCFtc28pJighSUUpXT48IS0tPjxkaXYgc3R5bGU9XCJib3gtc2l6aW5nOiBib3JkZXItYm94OyBoZWlnaHQ6IDEwMCU7IHBhZGRpbmc6IDBweDtib3JkZXItdG9wOiAwcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWxlZnQ6IDBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmlnaHQ6IDBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItYm90dG9tOiAwcHggc29saWQgdHJhbnNwYXJlbnQ7XCI+PCEtLTwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPVwiZm9udC1mYW1pbHk6J0xhdG8nLHNhbnMtc2VyaWY7XCIgcm9sZT1cInByZXNlbnRhdGlvblwiIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIHdpZHRoPVwiMTAwJVwiIGJvcmRlcj1cIjBcIj5cbiAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cIm92ZXJmbG93LXdyYXA6YnJlYWstd29yZDt3b3JkLWJyZWFrOmJyZWFrLXdvcmQ7cGFkZGluZzoxNXB4O2ZvbnQtZmFtaWx5OidMYXRvJyxzYW5zLXNlcmlmO1wiIGFsaWduPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8dGFibGUgaGVpZ2h0PVwiMHB4XCIgYWxpZ249XCJjZW50ZXJcIiBib3JkZXI9XCIwXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgd2lkdGg9XCIxMDAlXCIgc3R5bGU9XCJib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO3RhYmxlLWxheW91dDogZml4ZWQ7Ym9yZGVyLXNwYWNpbmc6IDA7bXNvLXRhYmxlLWxzcGFjZTogMHB0O21zby10YWJsZS1yc3BhY2U6IDBwdDt2ZXJ0aWNhbC1hbGlnbjogdG9wO2JvcmRlci10b3A6IDFweCBzb2xpZCAjZjlmOWY5Oy1tcy10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOy13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJVwiPlxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPVwidmVydGljYWwtYWxpZ246IHRvcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwid29yZC1icmVhazogYnJlYWstd29yZDtib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlICFpbXBvcnRhbnQ7dmVydGljYWwtYWxpZ246IHRvcDtmb250LXNpemU6IDBweDtsaW5lLWhlaWdodDogMHB4O21zby1saW5lLWhlaWdodC1ydWxlOiBleGFjdGx5Oy1tcy10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOy13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4mIzE2MDs8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8IS0tW2lmICghbXNvKSYoIUlFKV0+PCEtLT48L2Rpdj48IS0tPCFbZW5kaWZdLS0+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8IS0tW2lmIChtc28pfChJRSldPjwvdGQ+PCFbZW5kaWZdLS0+XG4gICAgICAgICAgICAgICAgICAgICAgPCEtLVtpZiAobXNvKXwoSUUpXT48L3RyPjwvdGFibGU+PC90ZD48L3RyPjwvdGFibGU+PCFbZW5kaWZdLS0+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInUtcm93LWNvbnRhaW5lclwiIHN0eWxlPVwicGFkZGluZzogMHB4O2JhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidS1yb3dcIiBzdHlsZT1cIk1hcmdpbjogMCBhdXRvO21pbi13aWR0aDogMzIwcHg7bWF4LXdpZHRoOiA2MDBweDtvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO3dvcmQtd3JhcDogYnJlYWstd29yZDt3b3JkLWJyZWFrOiBicmVhay13b3JkO2JhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO2Rpc3BsYXk6IHRhYmxlO3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8IS0tW2lmIChtc28pfChJRSldPjx0YWJsZSB3aWR0aD1cIjEwMCVcIiBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiBib3JkZXI9XCIwXCI+PHRyPjx0ZCBzdHlsZT1cInBhZGRpbmc6IDBweDtiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcIiBhbGlnbj1cImNlbnRlclwiPjx0YWJsZSBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiBib3JkZXI9XCIwXCIgc3R5bGU9XCJ3aWR0aDo2MDBweDtcIj48dHIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1wiPjwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDwhLS1baWYgKG1zbyl8KElFKV0+PHRkIGFsaWduPVwiY2VudGVyXCIgd2lkdGg9XCI2MDBcIiBzdHlsZT1cIndpZHRoOiA2MDBweDtwYWRkaW5nOiAwcHg7Ym9yZGVyLXRvcDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1sZWZ0OiAwcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0OiAwcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbTogMHB4IHNvbGlkIHRyYW5zcGFyZW50O1wiIHZhbGlnbj1cInRvcFwiPjwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1LWNvbCB1LWNvbC0xMDBcIiBzdHlsZT1cIm1heC13aWR0aDogMzIwcHg7bWluLXdpZHRoOiA2MDBweDtkaXNwbGF5OiB0YWJsZS1jZWxsO3ZlcnRpY2FsLWFsaWduOiB0b3A7XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiAxMDAlO3dpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XCI+XG4gICAgICAgICAgICAgICAgICA8IS0tW2lmICghbXNvKSYoIUlFKV0+PCEtLT48ZGl2IHN0eWxlPVwiYm94LXNpemluZzogYm9yZGVyLWJveDsgaGVpZ2h0OiAxMDAlOyBwYWRkaW5nOiAwcHg7Ym9yZGVyLXRvcDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1sZWZ0OiAwcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0OiAwcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbTogMHB4IHNvbGlkIHRyYW5zcGFyZW50O1wiPjwhLS08IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT1cImZvbnQtZmFtaWx5OidMYXRvJyxzYW5zLXNlcmlmO1wiIHJvbGU9XCJwcmVzZW50YXRpb25cIiBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiB3aWR0aD1cIjEwMCVcIiBib3JkZXI9XCIwXCI+XG4gICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9XCJvdmVyZmxvdy13cmFwOmJyZWFrLXdvcmQ7d29yZC1icmVhazpicmVhay13b3JkO3BhZGRpbmc6MjVweCAxMHB4O2ZvbnQtZmFtaWx5OidMYXRvJyxzYW5zLXNlcmlmO1wiIGFsaWduPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPHRhYmxlIHdpZHRoPVwiMTAwJVwiIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIGJvcmRlcj1cIjBcIj5cbiAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZy1yaWdodDogMHB4O3BhZGRpbmctbGVmdDogMHB4O1wiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgPGltZyBhbGlnbj1cImNlbnRlclwiIGJvcmRlcj1cIjBcIiBzcmM9YCtsb2dvK2AgYWx0PVwiSW1hZ2VcIiB0aXRsZT1cIkltYWdlXCIgc3R5bGU9XCJvdXRsaW5lOiBub25lO3RleHQtZGVjb3JhdGlvbjogbm9uZTstbXMtaW50ZXJwb2xhdGlvbi1tb2RlOiBiaWN1YmljO2NsZWFyOiBib3RoO2Rpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50O2JvcmRlcjogbm9uZTtoZWlnaHQ6IGF1dG87ZmxvYXQ6IG5vbmU7d2lkdGg6IDI5JTttYXgtd2lkdGg6IDE2OC4ycHg7XCIgd2lkdGg9XCIxNjguMlwiLz5cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgPCEtLVtpZiAoIW1zbykmKCFJRSldPjwhLS0+PC9kaXY+PCEtLTwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPCEtLVtpZiAobXNvKXwoSUUpXT48L3RkPjwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgICAgICAgIDwhLS1baWYgKG1zbyl8KElFKV0+PC90cj48L3RhYmxlPjwvdGQ+PC90cj48L3RhYmxlPjwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1LXJvdy1jb250YWluZXJcIiBzdHlsZT1cInBhZGRpbmc6IDBweDtiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInUtcm93XCIgc3R5bGU9XCJNYXJnaW46IDAgYXV0bzttaW4td2lkdGg6IDMyMHB4O21heC13aWR0aDogNjAwcHg7b3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDt3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7d29yZC1icmVhazogYnJlYWstd29yZDtiYWNrZ3JvdW5kLWNvbG9yOiAjMTYxYTM5O1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtkaXNwbGF5OiB0YWJsZTt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7YmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPCEtLVtpZiAobXNvKXwoSUUpXT48dGFibGUgd2lkdGg9XCIxMDAlXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgYm9yZGVyPVwiMFwiPjx0cj48dGQgc3R5bGU9XCJwYWRkaW5nOiAwcHg7YmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XCIgYWxpZ249XCJjZW50ZXJcIj48dGFibGUgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgYm9yZGVyPVwiMFwiIHN0eWxlPVwid2lkdGg6NjAwcHg7XCI+PHRyIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogIzE2MWEzOTtcIj48IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8IS0tW2lmIChtc28pfChJRSldPjx0ZCBhbGlnbj1cImNlbnRlclwiIHdpZHRoPVwiNjAwXCIgc3R5bGU9XCJ3aWR0aDogNjAwcHg7cGFkZGluZzogMHB4O2JvcmRlci10b3A6IDBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1yaWdodDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1ib3R0b206IDBweCBzb2xpZCB0cmFuc3BhcmVudDtcIiB2YWxpZ249XCJ0b3BcIj48IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidS1jb2wgdS1jb2wtMTAwXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDMyMHB4O21pbi13aWR0aDogNjAwcHg7ZGlzcGxheTogdGFibGUtY2VsbDt2ZXJ0aWNhbC1hbGlnbjogdG9wO1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImhlaWdodDogMTAwJTt3aWR0aDogMTAwJSAhaW1wb3J0YW50O1wiPlxuICAgICAgICAgICAgICAgICAgPCEtLVtpZiAoIW1zbykmKCFJRSldPjwhLS0+PGRpdiBzdHlsZT1cImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGhlaWdodDogMTAwJTsgcGFkZGluZzogMHB4O2JvcmRlci10b3A6IDBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1yaWdodDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1ib3R0b206IDBweCBzb2xpZCB0cmFuc3BhcmVudDtcIj48IS0tPCFbZW5kaWZdLS0+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9XCJmb250LWZhbWlseTonTGF0bycsc2Fucy1zZXJpZjtcIiByb2xlPVwicHJlc2VudGF0aW9uXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgd2lkdGg9XCIxMDAlXCIgYm9yZGVyPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwib3ZlcmZsb3ctd3JhcDpicmVhay13b3JkO3dvcmQtYnJlYWs6YnJlYWstd29yZDtwYWRkaW5nOjM1cHggMTBweCAxMHB4O2ZvbnQtZmFtaWx5OidMYXRvJyxzYW5zLXNlcmlmO1wiIGFsaWduPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPHRhYmxlIHdpZHRoPVwiMTAwJVwiIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIGJvcmRlcj1cIjBcIj5cbiAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZy1yaWdodDogMHB4O3BhZGRpbmctbGVmdDogMHB4O1wiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgPGltZyBhbGlnbj1cImNlbnRlclwiIGJvcmRlcj1cIjBcIiBzcmM9YCtjYWRlYWRvK2AgYWx0PVwiSW1hZ2VcIiB0aXRsZT1cIkltYWdlXCIgc3R5bGU9XCJvdXRsaW5lOiBub25lO3RleHQtZGVjb3JhdGlvbjogbm9uZTstbXMtaW50ZXJwb2xhdGlvbi1tb2RlOiBiaWN1YmljO2NsZWFyOiBib3RoO2Rpc3BsYXk6IGlubGluZS1ibG9jayAhaW1wb3J0YW50O2JvcmRlcjogbm9uZTtoZWlnaHQ6IGF1dG87ZmxvYXQ6IG5vbmU7d2lkdGg6IDEwJTttYXgtd2lkdGg6IDU4cHg7XCIgd2lkdGg9XCI1OFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT1cImZvbnQtZmFtaWx5OidMYXRvJyxzYW5zLXNlcmlmO1wiIHJvbGU9XCJwcmVzZW50YXRpb25cIiBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiB3aWR0aD1cIjEwMCVcIiBib3JkZXI9XCIwXCI+XG4gICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9XCJvdmVyZmxvdy13cmFwOmJyZWFrLXdvcmQ7d29yZC1icmVhazpicmVhay13b3JkO3BhZGRpbmc6MHB4IDEwcHggMzBweDtmb250LWZhbWlseTonTGF0bycsc2Fucy1zZXJpZjtcIiBhbGlnbj1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImxpbmUtaGVpZ2h0OiAxNDAlOyB0ZXh0LWFsaWduOiBsZWZ0OyB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XCI+XG4gICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zaXplOiAxNHB4OyBsaW5lLWhlaWdodDogMTQwJTsgdGV4dC1hbGlnbjogY2VudGVyO1wiPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiAyOHB4OyBsaW5lLWhlaWdodDogMzkuMnB4OyBjb2xvcjogI2ZmZmZmZjsgZm9udC1mYW1pbHk6IExhdG8sIHNhbnMtc2VyaWY7XCI+UmVjdXBlcmFyIHNlbmhhIDwvc3Bhbj48L3A+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgPCEtLVtpZiAoIW1zbykmKCFJRSldPjwhLS0+PC9kaXY+PCEtLTwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPCEtLVtpZiAobXNvKXwoSUUpXT48L3RkPjwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgICAgICAgIDwhLS1baWYgKG1zbyl8KElFKV0+PC90cj48L3RhYmxlPjwvdGQ+PC90cj48L3RhYmxlPjwhW2VuZGlmXS0tPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1LXJvdy1jb250YWluZXJcIiBzdHlsZT1cInBhZGRpbmc6IDBweDtiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInUtcm93XCIgc3R5bGU9XCJNYXJnaW46IDAgYXV0bzttaW4td2lkdGg6IDMyMHB4O21heC13aWR0aDogNjAwcHg7b3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDt3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7d29yZC1icmVhazogYnJlYWstd29yZDtiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtkaXNwbGF5OiB0YWJsZTt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7YmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPCEtLVtpZiAobXNvKXwoSUUpXT48dGFibGUgd2lkdGg9XCIxMDAlXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgYm9yZGVyPVwiMFwiPjx0cj48dGQgc3R5bGU9XCJwYWRkaW5nOiAwcHg7YmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XCIgYWxpZ249XCJjZW50ZXJcIj48dGFibGUgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgYm9yZGVyPVwiMFwiIHN0eWxlPVwid2lkdGg6NjAwcHg7XCI+PHRyIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcIj48IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8IS0tW2lmIChtc28pfChJRSldPjx0ZCBhbGlnbj1cImNlbnRlclwiIHdpZHRoPVwiNjAwXCIgc3R5bGU9XCJ3aWR0aDogNjAwcHg7cGFkZGluZzogMHB4O2JvcmRlci10b3A6IDBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1yaWdodDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1ib3R0b206IDBweCBzb2xpZCB0cmFuc3BhcmVudDtcIiB2YWxpZ249XCJ0b3BcIj48IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidS1jb2wgdS1jb2wtMTAwXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDMyMHB4O21pbi13aWR0aDogNjAwcHg7ZGlzcGxheTogdGFibGUtY2VsbDt2ZXJ0aWNhbC1hbGlnbjogdG9wO1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImhlaWdodDogMTAwJTt3aWR0aDogMTAwJSAhaW1wb3J0YW50O1wiPlxuICAgICAgICAgICAgICAgICAgPCEtLVtpZiAoIW1zbykmKCFJRSldPjwhLS0+PGRpdiBzdHlsZT1cImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGhlaWdodDogMTAwJTsgcGFkZGluZzogMHB4O2JvcmRlci10b3A6IDBweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1yaWdodDogMHB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1ib3R0b206IDBweCBzb2xpZCB0cmFuc3BhcmVudDtcIj48IS0tPCFbZW5kaWZdLS0+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9XCJmb250LWZhbWlseTonTGF0bycsc2Fucy1zZXJpZjtcIiByb2xlPVwicHJlc2VudGF0aW9uXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgd2lkdGg9XCIxMDAlXCIgYm9yZGVyPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwib3ZlcmZsb3ctd3JhcDpicmVhay13b3JkO3dvcmQtYnJlYWs6YnJlYWstd29yZDtwYWRkaW5nOjQwcHggNDBweCAzMHB4O2ZvbnQtZmFtaWx5OidMYXRvJyxzYW5zLXNlcmlmO1wiIGFsaWduPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwibGluZS1oZWlnaHQ6IDE0MCU7IHRleHQtYWxpZ246IGxlZnQ7IHdvcmQtd3JhcDogYnJlYWstd29yZDtcIj5cbiAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE0cHg7IGxpbmUtaGVpZ2h0OiAxNDAlO1wiPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiAxOHB4OyBsaW5lLWhlaWdodDogMjUuMnB4OyBjb2xvcjogIzY2NjY2NjtcIj5PbMOhICR7Y2xpZW50ZU5vbWV9LDwvc3Bhbj48L3A+XG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE0cHg7IGxpbmUtaGVpZ2h0OiAxNDAlO1wiPiZuYnNwOzwvcD5cbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cImZvbnQtc2l6ZTogMTRweDsgbGluZS1oZWlnaHQ6IDE0MCU7XCI+PHNwYW4gc3R5bGU9XCJmb250LXNpemU6IDE4cHg7IGxpbmUtaGVpZ2h0OiAyNS4ycHg7IGNvbG9yOiAjNjY2NjY2O1wiPlZvY8OqIHNvbGljaXRvdSBhIHZhbGlkYcOnw6NvIGRvIGUtbWFpbCBwZXNzb2FsIHBhcmEgcmVjdXBlcmFyIHVtYSBjb250YSBkZSBhY2Vzc28gbm8gQWRvdGEgRmlzaC48L3NwYW4+PC9wPlxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zaXplOiAxNHB4OyBsaW5lLWhlaWdodDogMTQwJTtcIj4mbmJzcDs8L3A+XG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE0cHg7IGxpbmUtaGVpZ2h0OiAxNDAlO1wiPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiAxOHB4OyBsaW5lLWhlaWdodDogMjUuMnB4OyBjb2xvcjogIzY2NjY2NjtcIj5PIGPDs2RpZ28gKFBJTiBkZSBzZWd1cmFuw6dhKSBhYmFpeG8gZm9pIGNyaWFkbyBwYXJhIGVzc2EgdmFsaWRhw6fDo28uIEVzc2UgY8OzZGlnbyB0ZW0gdmFsaWRhZGUgZGUgNSBtaW51dG9zIHBhcmEgc2VyIHV0aWxpemFkby48L3NwYW4+PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9XCJmb250LWZhbWlseTonTGF0bycsc2Fucy1zZXJpZjtcIiByb2xlPVwicHJlc2VudGF0aW9uXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgd2lkdGg9XCIxMDAlXCIgYm9yZGVyPVwiMFwiPlxuICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwib3ZlcmZsb3ctd3JhcDpicmVhay13b3JkO3dvcmQtYnJlYWs6YnJlYWstd29yZDtwYWRkaW5nOjBweCA0MHB4O2ZvbnQtZmFtaWx5OidMYXRvJyxzYW5zLXNlcmlmO1wiIGFsaWduPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8IS0tW2lmIG1zb10+PHN0eWxlPi52LWJ1dHRvbiB7YmFja2dyb3VuZDogdHJhbnNwYXJlbnQgIWltcG9ydGFudDt9PC9zdHlsZT48IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICA8ZGl2IGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICA8IS0tW2lmIG1zb10+PHY6cm91bmRyZWN0IHhtbG5zOnY9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbFwiIHhtbG5zOnc9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZTp3b3JkXCIgaHJlZj1cIlwiIHN0eWxlPVwiaGVpZ2h0OjQ3cHg7IHYtdGV4dC1hbmNob3I6bWlkZGxlOyB3aWR0aDoxNzlweDtcIiBhcmNzaXplPVwiMiVcIiAgc3Ryb2tlPVwiZlwiIGZpbGxjb2xvcj1cIiMxODE2M2FcIj48dzphbmNob3Jsb2NrLz48Y2VudGVyIHN0eWxlPVwiY29sb3I6I0ZGRkZGRjtmb250LWZhbWlseTonTGF0bycsc2Fucy1zZXJpZjtcIj48IVtlbmRpZl0tLT4gIFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiXCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9XCJ2LWJ1dHRvblwiIHN0eWxlPVwiYm94LXNpemluZzogYm9yZGVyLWJveDtkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Zm9udC1mYW1pbHk6J0xhdG8nLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOiBub25lOy13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogbm9uZTt0ZXh0LWFsaWduOiBjZW50ZXI7Y29sb3I6ICNGRkZGRkY7IGJhY2tncm91bmQtY29sb3I6ICMxODE2M2E7IGJvcmRlci1yYWRpdXM6IDFweDstd2Via2l0LWJvcmRlci1yYWRpdXM6IDFweDsgLW1vei1ib3JkZXItcmFkaXVzOiAxcHg7IHdpZHRoOmF1dG87IG1heC13aWR0aDoxMDAlOyBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkOyB3b3JkLWJyZWFrOiBicmVhay13b3JkOyB3b3JkLXdyYXA6YnJlYWstd29yZDsgbXNvLWJvcmRlci1hbHQ6IG5vbmU7Zm9udC1zaXplOiAxNHB4O1wiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiZGlzcGxheTpibG9jaztwYWRkaW5nOjE1cHggNDBweDtsaW5lLWhlaWdodDoxMjAlO1wiPjxzdHJvbmc+PHNwYW4gc3R5bGU9XCJsaW5lLWhlaWdodDogMTYuOHB4O1wiPiR7Y29kZVZlcmlmaWNhdGlvbn08L3NwYW4+PC9zdHJvbmc+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICA8IS0tW2lmIG1zb10+PC9jZW50ZXI+PC92OnJvdW5kcmVjdD48IVtlbmRpZl0tLT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPC9ib2R5PlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDwvaHRtbD5cbiAgICAgICAgICAgICAgICBgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBTdWJqZWN0OiB7XG4gICAgICAgICAgICAgIENoYXJzZXQ6IFwiVVRGLThcIixcbiAgICAgICAgICAgICAgRGF0YTogXCJSZWN1cGVyYcOnw6NvIGRlIGNvbnRhXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgU291cmNlOiBmcm9tLFxuICAgICAgICB9O1xuICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5TRVMuc2VuZEVtYWlsKHBhcmFtcykucHJvbWlzZSgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRS1tYWlsIGVudmlhZG8gY29tIHN1Y2Vzc28hXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgfVxuKi9cbiAgICAgICBcblxuc2dNYWlsLnNldEFwaUtleShwcm9jZXNzLmVudi5TRU5ER1JJRF9BUElfS0VZKVxuY29uc3QgbXNnID0ge1xuICB0bzogZW1haWwsXG4gIGZyb206IGZyb20sXG4gIHRlbXBsYXRlSWQ6IFwiZC00NzVkNjgzNmU2ZGU0Y2FmYTNjYTBjNjM2ZTE0ZDhhM1wiLFxuICAgIGR5bmFtaWNfdGVtcGxhdGVfZGF0YToge1xuICAgICAgbmFtZTpjbGllbnRlTm9tZSxcbiAgICAgIGNvZGU6IGNvZGVWZXJpZmljYXRpb24sXG4gICAgfSxcbn1cbnRyeXtcbiAgc2dNYWlsLnNlbmQobXNnKTtcbiAgY29uc29sZS5sb2coJ0VtYWlsIGVudmlhZG8gY29tIHN1Y2Vzc28hISEhJyk7XG59Y2F0Y2goZXJyb3Ipe1xuICBjb25zb2xlLmVycm9yKCdOw6NvIGZvaSBwb3Nzw612ZWwgZW52aWFyIG8gZW1haWwnKTtcbiAgY29uc29sZS5lcnJvcihlcnJvcik7XG5cbiAgaWYoZXJyb3IucmVzcG9uc2Upe1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IucmVzcG9uc2UuYm9keSlcbiAgfVxufVxufVxufSJdfQ==