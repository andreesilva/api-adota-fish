"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Endereco_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Endereco"));
const CreateEditEnderecoValidator_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Validators/CreateEditEnderecoValidator"));
class EnderecosController {
    async store({ response, request }) {
        const payload = await request.validate(CreateEditEnderecoValidator_1.default);
        const endereco = await Endereco_1.default.create({
            cidadeId: payload.cidade_id,
            clienteId: request.input("cliente_id"),
            rua: payload.rua,
            numero: payload.numero,
            bairro: payload.bairro,
            pontoReferencia: request.input("ponto_referencia"),
            complemento: request.input("complemento"),
        });
        return response.ok(endereco);
    }
    async update({ request, response, params }) {
        const payload = await request.validate(CreateEditEnderecoValidator_1.default);
        const endereco = await Endereco_1.default.findOrFail(params.id);
        endereco.merge(payload);
        await endereco.save();
        return response.ok(endereco);
    }
}
exports.default = EnderecosController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW5kZXJlY29zQ29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkVuZGVyZWNvc0NvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSx5RkFBMkM7QUFDM0MsbUlBQXFGO0FBRXJGLE1BQXFCLG1CQUFtQjtJQUU3QixLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBdUI7UUFDekQsTUFBTSxPQUFPLEdBQUcsTUFBTSxPQUFPLENBQUMsUUFBUSxDQUFDLHFDQUEyQixDQUFDLENBQUM7UUFFcEUsTUFBTSxRQUFRLEdBQUcsTUFBTSxrQkFBUSxDQUFDLE1BQU0sQ0FBQztZQUNuQyxRQUFRLEVBQUUsT0FBTyxDQUFDLFNBQVM7WUFDM0IsU0FBUyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDO1lBQ3RDLEdBQUcsRUFBRSxPQUFPLENBQUMsR0FBRztZQUNoQixNQUFNLEVBQUUsT0FBTyxDQUFDLE1BQU07WUFDdEIsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNO1lBQ3RCLGVBQWUsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDO1lBQ2xELFdBQVcsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQztTQUM1QyxDQUFDLENBQUM7UUFDSCxPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUdNLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBdUI7UUFDbEUsTUFBTSxPQUFPLEdBQUcsTUFBTSxPQUFPLENBQUMsUUFBUSxDQUFDLHFDQUEyQixDQUFDLENBQUM7UUFDcEUsTUFBTSxRQUFRLEdBQUcsTUFBTSxrQkFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFdEQsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QixNQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUV0QixPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDakMsQ0FBQztDQUNKO0FBM0JELHNDQTJCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSHR0cENvbnRleHRDb250cmFjdCB9IGZyb20gJ0Bpb2M6QWRvbmlzL0NvcmUvSHR0cENvbnRleHQnXG5pbXBvcnQgRW5kZXJlY28gZnJvbSAnQXBwL01vZGVscy9FbmRlcmVjbyc7XG5pbXBvcnQgQ3JlYXRlRWRpdEVuZGVyZWNvVmFsaWRhdG9yIGZyb20gJ0FwcC9WYWxpZGF0b3JzL0NyZWF0ZUVkaXRFbmRlcmVjb1ZhbGlkYXRvcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZGVyZWNvc0NvbnRyb2xsZXIge1xuICAgIFxuICAgIHB1YmxpYyBhc3luYyBzdG9yZSh7IHJlc3BvbnNlLCByZXF1ZXN0IH06IEh0dHBDb250ZXh0Q29udHJhY3QpIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHJlcXVlc3QudmFsaWRhdGUoQ3JlYXRlRWRpdEVuZGVyZWNvVmFsaWRhdG9yKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGVuZGVyZWNvID0gYXdhaXQgRW5kZXJlY28uY3JlYXRlKHtcbiAgICAgICAgICAgIGNpZGFkZUlkOiBwYXlsb2FkLmNpZGFkZV9pZCxcbiAgICAgICAgICAgIGNsaWVudGVJZDogcmVxdWVzdC5pbnB1dChcImNsaWVudGVfaWRcIiksXG4gICAgICAgICAgICBydWE6IHBheWxvYWQucnVhLFxuICAgICAgICAgICAgbnVtZXJvOiBwYXlsb2FkLm51bWVybyxcbiAgICAgICAgICAgIGJhaXJybzogcGF5bG9hZC5iYWlycm8sXG4gICAgICAgICAgICBwb250b1JlZmVyZW5jaWE6IHJlcXVlc3QuaW5wdXQoXCJwb250b19yZWZlcmVuY2lhXCIpLFxuICAgICAgICAgICAgY29tcGxlbWVudG86IHJlcXVlc3QuaW5wdXQoXCJjb21wbGVtZW50b1wiKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5vayhlbmRlcmVjbyk7XG4gICAgfVxuXG4gICAgXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZSh7IHJlcXVlc3QsIHJlc3BvbnNlLCBwYXJhbXMgfTogSHR0cENvbnRleHRDb250cmFjdCkge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgcmVxdWVzdC52YWxpZGF0ZShDcmVhdGVFZGl0RW5kZXJlY29WYWxpZGF0b3IpO1xuICAgICAgICBjb25zdCBlbmRlcmVjbyA9IGF3YWl0IEVuZGVyZWNvLmZpbmRPckZhaWwocGFyYW1zLmlkKTtcblxuICAgICAgICBlbmRlcmVjby5tZXJnZShwYXlsb2FkKTtcbiAgICAgICAgYXdhaXQgZW5kZXJlY28uc2F2ZSgpO1xuXG4gICAgICAgIHJldHVybiByZXNwb25zZS5vayhlbmRlcmVjbyk7XG4gICAgfVxufVxuIl19